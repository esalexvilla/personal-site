---
interface Props {
  title: string;
  background_image?: string;
  icon?: string;
}

const { title, background_image, icon } = Astro.props;
---

<div class="window">
  <div class="title-bar">
    <div class="window-title-container">
      {icon ? <div class="titlebar-icon-container"><img src={icon} alt="Window Icon" class="window-icon" width="24" height="24"/></div> : null}
      <div class="window-title">{title}</div>
    </div>
    <div class="window-controls">
      <button 
        class="window-btn minimize-btn" 
        aria-label="Minimize"
      >
        <span>─</span>
      </button>
      <button 
        class="window-btn maximize-btn" 
        aria-label="Maximize"
      >
        <span>☐</span>
      </button>
      <button 
        class="window-btn close-btn" 
        aria-label="Close"
      >
        <span>✕</span>
      </button>
    </div>
  </div>
  <div class={`window-content${background_image ? ' with-background' : ''}`} style={background_image ? `background-image: url(${background_image}); background-size: cover;` : ''}>
    <slot />
  </div>
</div>

<style>
	.window {
		border: 1px solid var(--border-color);
		background-color: var(--window-content-bg);
	}

	.title-bar {
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 0.5rem 0.5rem 0.5rem 0.5rem;
		border-bottom: 1px solid var(--border-color);
		background-color: var(--titlebar-bg);
	}

	.window-controls {
		display: flex;
		gap: 0.5rem;
	}

	.titlebar-icon-container {
		border: 1px solid var(--border-color);
		display: flex;
	}

	.window-controls button {
		background: var(--button-bg);
		border: 1px solid var(--border-color);
		color: var(--text-color);
		cursor: pointer;
		font-size: 1rem;
		width: 1.5rem;
		height: 1.5rem;
		display: flex;
		justify-content: center;
		align-items: center;
		transition: background-color 0.2s ease;
	}

	.window-controls button:hover {
		background: var(--button-hover);
	}

	.window-title-container {
		display: flex;
		align-items: center;
		gap: 0.5rem;
	}

	.window-content {
		padding: 0.5rem;
		background-color: var(--window-content-bg);
	}
</style>